
amadu@debian:~$ ogrinfo /home/amadu/Downloads/tivaouane_shp/planet_osm_point.shpINFO: Open of `/home/amadu/Downloads/tivaouane_shp/planet_osm_point.shp'
      using driver `ESRI Shapefile' successful.
1: planet_osm_point (Point)
root@debian:/home/amadu# su postgres
postgres@debian:/home/amadu$ psql
psql (9.4.8)
Type "help" for help.

postgres=# \l
postgres=# \c pgroutingDB
You are now connected to database "pgroutingDB" as user "postgres".
pgroutingDB=# \dt
              List of relations
 Schema |      Name       | Type  |  Owner   
--------+-----------------+-------+----------
 public | spatial_ref_sys | table | postgres
(1 row)

pgroutingDB=# \q
postgres@debian:/home/amadu$ shp2pgsql Downloads/tivaouane_shp/planet_osm_point.shp tiv pgroutingDB > Downloads/tivaouane_shp/tiv.sql
bash: Downloads/tivaouane_shp/tiv.sql: Permission denied
amadu@debian:~$ shp2pgsql Downloads/tivaouane_shp/planet_osm_point.shp tiv pgroutingDB > Downloads/tivaouane_shp/tiv.sql
Shapefile type: Point
Postgis type: POINT[2]
amadu@debian:~$ psql -d pgroutingDB -f Downloads/tivaouane_shp/tiv.sql 
SET
SET
BEGIN
CREATE TABLE
ALTER TABLE
             addgeometrycolumn             
-------------------------------------------
 public.tiv.geom SRID:0 TYPE:POINT DIMS:2 
(1 row)

INSERT 0 1
....
INSERT 0 1
COMMIT
amadu@debian:~$ su root
Password: 
root@debian:/home/amadu# su postgres
postgres@debian:/home/amadu$ psql
psql (9.4.8)
Type "help" for help.

postgres=# \c pgroutingDB
You are now connected to database "pgroutingDB" as user "postgres".
pgroutingDB=# \dt
              List of relations
 Schema |      Name       | Type  |  Owner   
--------+-----------------+-------+----------
 public | spatial_ref_sys | table | postgres
 public | tiv             | table | amadu
(2 rows)

pgroutingDB=# select name, highway from tiv ;
pgroutingDB=# \q
postgres@debian:/home/amadu$ psql
psql (9.4.8)
Type "help" for help.

postgres@debian:/home/amadu$ psql -U amadu -W
Password for user amadu: 
psql: FATAL:  Peer authentication failed for user "amadu"
postgres@debian:/home/amadu$ psql
psql (9.4.8)
Type "help" for help.

postgres=# alter role amadu with login ;
ALTER ROLE
postgres=# \q
postgres@debian:/home/amadu$ nano /etc/postgresql/9.4/main/pg_hba.conf 
root@debian:/home/amadu# /etc/init.d/postgresql restart
[ ok ] Restarting postgresql (via systemctl): postgresql.service.
root@debian:/home/amadu# su postgres
postgres@debian:/home/amadu$ psql -U amadu -W
Password for user amadu: 
psql: FATAL:  database "amadu" does not exist
postgres@debian:/home/amadu$ psql -U amadu -d postgres -W
Password for user amadu: 
psql (9.4.8)
Type "help" for help.

postgres=# \l
postgres=# \c pgroutingDB
Password for user amadu: 
You are now connected to database "pgroutingDB" as user "amadu".
pgroutingDB=# \dt
              List of relations
 Schema |      Name       | Type  |  Owner   
--------+-----------------+-------+----------
 public | spatial_ref_sys | table | postgres
 public | tiv             | table | amadu
(2 rows)

pgroutingDB-# \q
postgres@debian:/home/amadu$ exit
exit
root@debian:/home/amadu# exit
exit
amadu@debian:~$ nano transform.sql 
amadu@debian:~$ su root
Password: 
root@debian:/home/amadu# su postgres
postgres@debian:/home/amadu$ psql -d pgroutingDB
psql (9.4.8)
Type "help" for help.

pgroutingDB=# select name, FClass from roadstiv ;
pgroutingDB=# \q
postgres@debian:/home/amadu$ exit
exit
root@debian:/home/amadu# exit
exit
amadu@debian:~$ nano transform.sql 
amadu@debian:~$ psql -d pgroutingDB -f transform.sql 
Password: 
amadu@debian:~$ nano transform.sql 
amadu@debian:~$ psql -d pgroutingDB -f transform.sql 
Password: 
amadu@debian:~$ nano transform.sql 
amadu@debian:~$ psql -d pgroutingDB -f transform.sql 
Password: 
amadu@debian:~$ nano transform.sql 
amadu@debian:~$ nano transform.sql 
amadu@debian:~$ psql -d pgroutingDB -f transform.sql 
Password: 
ALTER TABLE
ALTER TABLE
ALTER TABLE
ALTER TABLE
ALTER TABLE
ALTER TABLE
ALTER TABLE
ALTER TABLE
UPDATE 1371
UPDATE 2
UPDATE 8
UPDATE 927
UPDATE 5
psql:transform.sql:21: NOTICE:  table "transform_unsdit" does not exist, skipping
DROP TABLE
CREATE TABLE
                         addgeometrycolumn                          
--------------------------------------------------------------------
 public.transform_unsdit.the_geom SRID:4326 TYPE:LINESTRING DIMS:2 
(1 row)

INSERT 0 1371
amadu@debian:~$ 


--
 ogr2ogr -f "ESRI Shapefile" bati_ml.shp -sql "select osm_way_id as "osm_id", name from multipolygons where building is not null" -lco endocoding=ut-8 Downloads/carte_du_mali.pbf 

 ogr2ogr -f "ESRI Shapefile" roads_ml.shp -sql "select osm_id, name, highway, ref, bridge, width, maxspeed from lines where highway is not null" -lco endocoding=ut-8 Downloads/carte_du_mali.pbf 


